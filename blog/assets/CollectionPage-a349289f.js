import{d as R,u as U,a as A,b as F,r as k,c as H,o as M,e as T,f as a,g as p,h as y,w as e,i as n,j as r,t as g,k as j,F as E,l as N,E as v,m as q,n as z,p as J,q as O,s as Q,v as X,x as Y,_ as Z}from"./index-31ea285c.js";/* empty css                  *//* empty css                   *//* empty css                 *//* empty css               *//* empty css                   *//* empty css                */import{c as _,C as ee}from"./Collection-6161e28c.js";const te={key:1,class:"collection-body"},oe={key:2,class:"collection-body",style:{"margin-top":"50px"}},le=R({__name:"CollectionPage",setup(ne){const V=U(),B=A(),$=F(),s=k(null),x=k([]),w=k([]),u=H({visible:!1,groupName:""}),P=()=>{let t=u.groupName.replace(/\s/g,"");if(t===""){v.warning("收藏夹名称不能为空");return}_.putCollectionGroup(t).then(o=>{m(),u.visible=!1,v.success("创建成功")})},I=t=>{_.deleteCollectionGroup(t).then(o=>{m(),v.success("删除成功")})},h=t=>{b(t)},S=t=>{var o;_.deleteCollection(t.id,(o=s.value)==null?void 0:o.id).then(d=>{b(s.value),v.success("移除成功")})},W=t=>{B.push(`/worksbrowser/?worksId=${t.id}`)},b=t=>{t==null?s.value=new ee($.userInfo.id,"默认收藏夹"):s.value=t,_.listCollection(t==null?void 0:t.id).then(o=>{w.value=o})},m=()=>{_.listCollectionGroup().then(t=>{x.value=t,t.find(o=>{var d;return o.id===((d=s.value)==null?void 0:d.id)})||(s.value=null)})},G=()=>{V.switchPage([])};return M(()=>{G()}),T(()=>{G(),m()}),(t,o)=>{const d=q,D=z,c=J,f=O,i=Q,K=X,L=Y;return a(),p("div",null,[s.value?(a(),y(f,{key:0,class:"collection-header"},{default:e(()=>[n(c,{span:10},{default:e(()=>[n(D,{onBack:o[0]||(o[0]=l=>s.value=null)},{content:e(()=>[n(d,null,{default:e(()=>{var l;return[r(g((l=s.value)==null?void 0:l.groupKey),1)]}),_:1})]),_:1})]),_:1})]),_:1})):j("",!0),s.value?(a(),p("div",oe,[(a(!0),p(E,null,N(w.value,l=>(a(),y(f,{key:l.id},{default:e(()=>[n(c,{span:20},{default:e(()=>[n(i,{text:"",style:{width:"100%"},class:"collection-text",onClick:C=>W(l)},{default:e(()=>[r(g(l.content.split(`
`)[0]),1)]),_:2},1032,["onClick"])]),_:2},1024),n(c,{span:4},{default:e(()=>[n(i,{text:"",onClick:C=>S(l)},{default:e(()=>[r("移除")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))])):(a(),p("div",te,[n(f,null,{default:e(()=>[n(c,{span:20},{default:e(()=>[n(i,{text:"",style:{width:"100%"},onClick:o[1]||(o[1]=l=>h(null))},{default:e(()=>[r("默认收藏夹")]),_:1})]),_:1})]),_:1}),(a(!0),p(E,null,N(x.value,l=>(a(),y(f,{key:l.id},{default:e(()=>[n(c,{span:20},{default:e(()=>[n(i,{text:"",style:{width:"100%"},onClick:C=>h(l)},{default:e(()=>[r(g(l.groupKey),1)]),_:2},1032,["onClick"])]),_:2},1024),n(c,{span:4},{default:e(()=>[n(i,{text:"",onClick:C=>I(l.groupKey)},{default:e(()=>[r("移除")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)),n(i,{type:"primary",onClick:o[2]||(o[2]=l=>u.visible=!0),style:{width:"200px"}},{default:e(()=>[r("新建收藏夹")]),_:1})])),n(L,{modelValue:u.visible,"onUpdate:modelValue":o[4]||(o[4]=l=>u.visible=l),title:"新建收藏夹",width:"500"},{footer:e(()=>[n(i,{type:"primary",onClick:P},{default:e(()=>[r(" Confirm ")]),_:1})]),default:e(()=>[n(K,{modelValue:u.groupName,"onUpdate:modelValue":o[3]||(o[3]=l=>u.groupName=l),placeholder:"请输入收藏夹名称"},null,8,["modelValue"])]),_:1},8,["modelValue"])])}}});const _e=Z(le,[["__scopeId","data-v-026b805d"]]);export{_e as default};
