var l=Object.defineProperty;var p=(n,s,e)=>s in n?l(n,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[s]=e;var a=(n,s,e)=>(p(n,typeof s!="symbol"?s+"":s,e),e);import{au as g,O as o}from"./index-31ea285c.js";class h{constructor(){a(this,"refreshTime",new Date);a(this,"accessedFileDistribution",[]);a(this,"accessedDirDistribution",[]);a(this,"accessedFileTypeDistribution",[]);a(this,"accessedNum",[]);a(this,"fileTypeDistribution",[]);a(this,"uploadFileNum",[])}}class w{constructor(s){a(this,"session");this.session=s}async getDirectoryInfo(s,e){s&&s.endsWith("/")&&(s=s.substring(0,s.length-1));const t=await this.session.get("/cos-dir/info",{params:{fullPath:s,directoryId:e}});return o.get(t,"data")}async getFileInfo(s,e){const t=await this.session.get("/cos-file/info",{params:{fullPath:s,fileId:e}});return o.get(t,"data")}async listFilesAndDirectories(s="/",e=null,t=0,i=200){const r=await this.getDirectoryInfo(s,e),c=await this.session.get("/cos-file",{params:{fullDirectoryName:s,directoryId:e,page:t,pageSize:i}}),d=await this.session.get("/cos-dir",{params:{fullDirectoryName:s,directoryId:e,page:t,pageSize:i}});return{files:o.get(c,"data.content")||[],directories:o.get(d,"data.content")||[],dirInfo:r}}async listAllFileAndDirectory(s){let e;s&&s!="/"&&(e=await this.getDirectoryInfo(s));const t=await this.session.get("/cos-file/all",{params:{fullDirectoryName:s,pageSize:1e3}}),i=await this.session.get("/cos-dir/all",{params:{fullDirectoryName:s,pageSize:1e3}});return{files:o.get(t,"data.content")||[],directories:o.get(i,"data.content")||[],dirInfo:e}}async listAllDirectory(s){const e=await this.session.get("/cos-dir/all",{params:{fullDirectoryName:s,pageSize:1e3}});return{files:[],directories:o.get(e,"data.content")||[]}}async createFileMeta(s,e,t,i,r,c){return(await this.session.put("/cos-upload",{directoryId:s,fileName:i,fileSize:c,parentDirectoryId:e,directoryName:t,customerHeader:r})).data}async uploadFile(s,e){const t=new FormData;t.append("file",e),t.append("fileMetaId",s),await this.session.post("/cos-upload",t,{headers:{"Content-Type":"application/octet-stream"}})}async downloadFile(s){return(await this.session.get(`/cos-download/${s}`,{responseType:"blob"})).data}async query(s,e,t){return(await this.session.get(`/cos/${s}/${e}/${t}`)).data}async listDirectoryPage(s,e=1,t=20){return(await this.session.get("/cos-dir",{params:{directoryId:s,current:e,pageSize:t}})).data}async createDirectory(s,e){return(await this.session.put("/cos-dir",{parentDirectoryId:s,directoryName:e})).data}async moveDirectory(s,e,t){return(await this.session.post("/cos-dir",{directoryId:s,newParentDirectoryId:e,newDirectoryName:t})).data}async deleteDirectory(s){return(await this.session.delete(`/cos-dir/${s}`)).data}async listFiles(s,e=1,t=20){return(await this.session.get("/cos-file",{params:{directoryId:s,current:e,pageSize:t}})).data}async moveFile(s,e,t){return(await this.session.post("/cos-file",{fileMetaId:s,newDirectoryId:e,fileName:t})).data}async deleteFile(s){return(await this.session.delete(`/cos-file/${s}`)).data}}const f=new w(g);export{h as C,f as c};
