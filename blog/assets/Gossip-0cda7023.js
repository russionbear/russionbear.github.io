var $=Object.defineProperty;var S=(l,s,e)=>s in l?$(l,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[s]=e;var o=(l,s,e)=>(S(l,typeof s!="symbol"?s+"":s,e),e);import{d as z,r as w,f as g,g as y,z as u,i,w as r,j as m,t as _,A as I,a6 as T,D as b,I as A,B as V,k as x,aG as D,ai as M,m as N,s as B,v as R,p as L,q as H,_ as O,W as U,aH as W,au as Y,O as h}from"./index-31ea285c.js";/* empty css               *//* empty css                 *//* empty css                *//* empty css                  */const j={class:"gossip-item"},q={class:"gossip-item-avatar"},K={class:"gossip-item-content"},P={class:"gossip-item-info"},F={class:"gossip-item-textarea"},J={key:0,class:"gossip-item-input"},Q=z({__name:"GossipItem",props:{data:{}},emits:["command","send","like"],setup(l,{emit:s}){const e=w(!1),t=w(!1),a=w(""),d=s;return(p,n)=>{const G=M,f=N,v=B,E=R,k=L,C=H;return g(),y("div",j,[u("div",q,[i(G,{size:"small",src:"https://cube.elemecdn.com/9/c2/f0ee8a3c7c9638a54940382568c9dpng.png"})]),u("div",K,[u("div",P,[u("div",null,[i(f,{size:"small"},{default:r(()=>[m(_(p.data.userInfo.username),1)]),_:1}),i(f,{size:"small"},{default:r(()=>[m("Â "+_(I(T)(p.data.insertTime).format("YY-MM-DD HH:mm")),1)]),_:1})]),u("div",null,[i(v,{style:b({opacity:t.value?1:0}),onMouseenter:n[0]||(n[0]=c=>t.value=!0),onMouseleave:n[1]||(n[1]=c=>t.value=!1),type:"text",size:"small",onClick:n[2]||(n[2]=c=>e.value=!e.value)},{default:r(()=>[m("Reply")]),_:1},8,["style"]),i(v,{type:"text",size:"small",onClick:n[3]||(n[3]=c=>d("like",p.data))},{default:r(()=>[u("span",null,_(p.data.worksStatistics.likeNum?p.data.worksStatistics.likeNum:""),1),i(A,{type:I(V).LIKE,height:20,width:20},null,8,["type"])]),_:1})])]),u("div",F,[i(f,{size:"default"},{default:r(()=>[m(_(p.data.content),1)]),_:1})]),e.value?(g(),y("div",J,[i(C,null,{default:r(()=>[i(k,{span:21},{default:r(()=>[i(E,{modelValue:a.value,"onUpdate:modelValue":n[4]||(n[4]=c=>a.value=c),maxlength:"200",placeholder:"Please input","show-word-limit":"",type:"textarea"},null,8,["modelValue"])]),_:1}),i(k,{span:3},{default:r(()=>[i(v,{type:"text",onClick:n[5]||(n[5]=c=>d("send",p.data.id,p.data.topGossipId,a.value))},{default:r(()=>[m("Send")]),_:1})]),_:1})]),_:1})])):x("",!0),D(p.$slots,"default",{},void 0,!0)])])}}});const ns=O(Q,[["__scopeId","data-v-36d0bb12"]]);class is{constructor(s){o(this,"id");o(this,"worksType");o(this,"worksId");o(this,"parentGossipId");o(this,"topGossipId");o(this,"floor",0);o(this,"userId");o(this,"userInfo");o(this,"content");o(this,"insertTime",new Date);o(this,"isDel",!1);o(this,"approved",!1);o(this,"worksStatistics");o(this,"children",[]);this.worksStatistics=new U,this.userInfo=new W,this.content="content",s&&Object.assign(this,s)}}class X{constructor(s){o(this,"session");this.session=s}async listGossip(s,e="ARTICLE",t=null,a=0,d=1e3){const p=await this.session.get(`/works-gossip/${s}/${e}`,{params:{topId:t,current:a,pageSize:d}});return h.get(p,"data.content")}async listAllGossip(s,e="ARTICLE",t=0,a=1e3){const d=await this.session.get(`/works-gossip/${s}/${e}/all`,{params:{current:t,pageSize:a}});return h.get(d,"data.content")}async putGossip(s,e,t,a,d){return await this.session.put("/works-gossip",{worksType:s,worksId:e,parentGossipId:a,topGossipId:d,content:t})}async deleteGossip(s){return await this.session.delete(`/works-gossip/${s}`)}}const ls=new X(Y),ps=l=>{const s=new Map,e=[];return l.forEach(t=>{s.set(t.id,t)}),l.forEach(t=>{if(t.topGossipId){const a=s.get(t.topGossipId);a&&a.children.push(t)}else e.push(t)}),e};export{is as G,ns as _,ps as c,ls as g};
