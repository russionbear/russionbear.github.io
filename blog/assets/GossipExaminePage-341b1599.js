import{G as m}from"./GeneralTable-35001312.js";import{e as s}from"./Examine-bbff49eb.js";import{d as u,c as b,r as i,e as g,f as h,h as k,E as o,a6 as r}from"./index-31ea285c.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                    */const E=u({__name:"GossipExaminePage",setup(f){const e=b({tableKey:Math.random().toString(),total:0,page:1,pageSize:20}),c=i([{label:"id",prop:"id",width:"120",fixed:!0},{label:"邮箱",prop:"userInfo.email",width:"120"},{label:"评论内容",prop:"content"},{label:"评论时间",prop:"insertTime",width:"120"},{label:"是否通过",prop:"approved",width:"120"},{label:"Operations",prop:"operations",width:"160",fixed:"right",operations:[{label:"冻号",cmd:"lock"},{label:"解冻",cmd:"unlock"},{label:"通过",cmd:"pass"},{label:"不通过",cmd:"unpassable"}]}]),l=i([]),d=(t,a)=>{switch(t){case"lock":s.setUnlockTime(a.userId,r().add(7,"days").toDate()).then(n=>{o.success("冻号成功")});break;case"unlock":s.setUnlockTime(a.userId,r().subtract(1,"days").toDate()).then(n=>{o.success("解冻成功")});break;case"pass":s.setGossipApproved(a.id,!0).then(n=>{o.success("成功"),p(e.page)});break;case"unpassable":s.setGossipApproved(a.id,!1).then(n=>{o.success("成功"),p(e.page)});break}},p=t=>{s.listGossip(void 0,t-1,e.pageSize).then(a=>{l.value=a.content,e.total=a.totalElements,e.page=a.number+1}),e.tableKey=Math.random().toString()};return g(()=>{s.listGossip(void 0,e.page-1,e.pageSize).then(t=>{l.value=t.content,e.total=t.totalElements,e.page=t.number+1})}),(t,a)=>(h(),k(m,{"table-key":e.tableKey,columns:c.value,"table-data":l.value,total:e.total,"page-size":e.pageSize,page:e.page,onCommand:d,onPageChange:p},null,8,["table-key","columns","table-data","total","page-size","page"]))}});export{E as default};
