import{d as y,a as x,u as B,r as l,o as L,e as b,f as o,g as u,F as _,l as f,h as i,k as h,w as E,j as I,E as m,s as N,_ as P}from"./index-31ea285c.js";import{U}from"./UserInfoView-50e51eba.js";import{r}from"./Watch-ede47acc.js";import{W as V}from"./WorksInfoView-8796fd41.js";/* empty css                     *//* empty css                   *//* empty css               *//* empty css                *//* empty css                  *//* empty css               */const A={class:"watch-page-container"},F=y({__name:"WatchPage",setup(M){const v=x(),w=B(),p=l([]),a=l(!1),d=l([]),W=(e,t)=>{t?r.putWatch(e).then(c=>{m.success("关注成功"),n()}):r.deleteWatch(e).then(c=>{m.success("取消关注成功"),n()})},n=()=>{r.getWatchList().then(e=>{p.value=e})},g=e=>{r.getWatchedWorksList(e).then(t=>{console.log("works",t),d.value=t,a.value=!0})},C=e=>{v.push(`/worksbrowser/?worksId=${e.id}`)},k=()=>{w.switchPage([])};return L(()=>{k()}),b(()=>{k(),n()}),(e,t)=>{const c=N;return o(),u("div",A,[a.value?h("",!0):(o(!0),u(_,{key:0},f(p.value,s=>(o(),i(U,{key:s.id,watched:!0,user:s.watchedUserInfo,onWatch:W,onClick:g},null,8,["user"]))),128)),a.value?(o(),i(c,{key:1,onClick:t[0]||(t[0]=s=>a.value=!1),style:{width:"300px"}},{default:E(()=>[I("Back")]),_:1})):h("",!0),a.value?(o(!0),u(_,{key:2},f(d.value,s=>(o(),i(V,{style:{"margin-top":"10px"},works:s,key:s.id,onClickWorks:C},null,8,["works"]))),128)):h("",!0)])}}});const J=P(F,[["__scopeId","data-v-5fb08e79"]]);export{J as default};
