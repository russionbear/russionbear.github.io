var u=Object.defineProperty;var h=(r,e,t)=>e in r?u(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var d=(r,e,t)=>(h(r,typeof e!="symbol"?e+"":e,t),t);import{au as p,Z as m,O as n}from"./index-31ea285c.js";import{D as w,T as y,a as k}from"./DirectroyTree-a29405c1.js";class g{constructor(e){d(this,"session");this.session=e}async listDirectoryAndWorks(e,t=!1){const s=await this.listDirectory(e,t),i=await this.listWorks(e,t),a=await this.getDirectoryInfo(e);return{dirList:s,worksList:i,dirInfo:a}}async getDirectoryInfo(e){return e==null?null:await this.session.get(`/works-dir/dir/${e}`)}async listDirectory(e,t=!1){const s=await this.session.get("/works-dir",{params:{pageSize:1e3,currentPage:0,directoryId:e,getAll:t}});return n.get(s,"data.content")}async listWorks(e,t=!1){const s=await this.session.get("/works-dir/works",{params:{pageSize:1e3,currentPage:0,directoryId:e,getAll:t}});return n.get(s,"data.content")}async putDirectory(e,t,s){return await this.session.put("/works-dir",{parentDirectoryId:e,directoryName:t,tags:s})}async modifyDirectorySetting(e,t){return await this.session.post("/works-dir",{directoryId:e,tags:t})}async moveWorks(e,t,s){return await this.session.post("/works-dir/works",{worksId:e,newParentDirectoryId:t,newName:s})}async moveDirectory(e,t,s){return await this.session.post("/works-dir/dir",{oldDirectoryId:e,newParentDirectoryId:t,newName:s})}async deleteDirectory(e){return await this.session.delete(`/works-dir/dir/${e}`)}async deleteWorks(e){return await this.session.delete(`/works-dir/works/${e}`)}async queryOne(e){const t=await this.session.get(`/works/query/${e}`),s=n.get(t,"data");return s.setting=n.isString(s.setting)?JSON.parse(s.setting):s.setting,s}async searchWorks(e,t,s,i=0,a=100){return(await this.session.get("/works/search",{params:{kw:e,searchType:t,searchOrder:s,pageSize:a,page:i}})).data}putTheme(e,t,s,i,a){return this.session.put("/works-theme",{directoryId:e,desc:t,title:s,tags:i,setting:a})}async modifyTheme(e,t,s,i,a){return await this.session.post("/works-theme",{themeId:e,desc:t,title:s,tags:i,setting:a})}async putThemeItem(e,t,s){return await this.session.put("/works-theme/item",{themeId:e,worksIds:t,isDel:s})}async removeTheme(e){return await this.session.delete(`/works-theme/${e}`)}async listHistory(e,t=0,s=1e3){const i=await this.session.get(`/works-article/history/${e}`,{params:{current:t,pageSize:s}});return n.get(i,"data.content")}async getHistory(e,t){const s=await this.session.get(`/works-article/history/${e}/${t}`);return n.get(s,"data")}async putArticle(e,t,s,i=[],a={}){return await this.session.put("/works-article",{title:e,content:t,directoryId:s,tags:i,setting:a})}async modifyArticle(e,t){return await this.session.post("/works-article",{articleId:e,content:t})}removeArticle(e){return this.session.delete(`/works-article/${e}`)}async putArticleSetting(e,t,s,i){return await this.session.post("/works-article/setting",{articleId:e,title:t,tags:s,setting:i})}async likeWorks(e,t){return await this.session.post("/works-statistics/like",{worksId:e,worksType:t})}}const $=new g(p),D=r=>{const e=new w;return e.createTime=m(r.createTime).format("YYYY-MM-DD HH:mm:ss"),e.detail=r.fullDirectoryName,e.isDir=!1,e.fileName=r.fileName,e.label=r.fileName,e.parentId=r.directoryId,e.tags=r.tags,e.id=r.id,e},f=r=>{const e=new w;return e.createTime=m(r.createTime).format("YYYY-MM-DD HH:mm:ss"),e.detail=r.fullDirectoryName,e.isDir=!0,e.fileName=r.name,e.label=r.name,e.parentId=r.parentId,e.tags=r.tags,e.id=r.id,e.children=[],e},Y=(r,e)=>{const t={},s=new y;s.isRoot=!0;const i=new k;i.childrenType="array",i.parentIdKey="parentId",i.nameKey="fileName",e.map(o=>f(o)).forEach(o=>{t[o.id]=o});const c=i.makeRootByParentId(n.values(t));return r.map(o=>D(o)).forEach(o=>{var l;o.parentId?t[o.parentId]&&((l=t[o.parentId].children)==null||l.push(o)):c.push(o)}),console.log("result",n.cloneDeep(c)),c};export{D as c,Y as m,$ as w};
