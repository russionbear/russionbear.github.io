"use strict";(self["webpackChunkadvancedwar_vue"]=self["webpackChunkadvancedwar_vue"]||[]).push([[172,206],{40089:function(e,a){a.Z=(e,a)=>{const t=e.__vccOpts||e;for(const[r,l]of a)t[r]=l;return t}},23172:function(e,a,t){t.r(a),t.d(a,{default:function(){return h}});var r=t(73396),l=t(87139),u=t(44870),o=t(70678),n=t(20065),c=t(15206),d=t(18678);const s={class:"audio"},i=["hidden","src"],v=(0,r.Uk)("begin"),p=(0,r.Uk)("back"),m=(0,r.Uk)("next chapter");var f=(0,r.aZ)({name:"CompaignText",setup(e){const a=(0,n.oR)(),t=(0,o.tv)(),f=(0,u.iH)(!1),g=(0,u.iH)({chapterId:0,title:"",coverColor:"",coverImage:"",coverAudio:"",mapId:void 0,order:0,battleId:0}),k=(0,u.iH)("# error"),h=(0,u.iH)([]),y=(0,u.iH)(void 0),w=()=>{t.push({path:"/battle",query:{id:t.currentRoute.value.query.battleId}})},I=()=>{let e=h.value.find((e=>e.order===g.value.order+1));console.log("battle",e),t.push({path:"/text",query:{battleId:t.currentRoute.value.query.battleId,id:e?.chapterId}}),_(parseInt(e?.chapterId))},b=()=>{d.ey({token:a.state.userinfo.token,mapId:g.value.mapId,ownerDsc:"personal game",personal:!0}).then((e=>{console.log("response",e.data),y.value=e.data["data"]}))},_=e=>{let a=parseInt(t.currentRoute.value.query.battleId);isNaN(a)||isNaN(e)||(d.Fv({battleId:a}).then((a=>{h.value=a.data["data"],g.value=h.value.find((a=>a.chapterId==e)),console.log(g.value,"88hou")})),d.Id({chapterId:e}).then((e=>{k.value=e.data["data"]})))};return(0,r.bv)((()=>{let e=t.currentRoute.value.query.id;_(parseInt(e))})),(e,a)=>{const t=(0,r.up)("el-button"),u=(0,r.up)("el-space"),o=(0,r.up)("v-md-preview"),n=(0,r.up)("el-scrollbar");return(0,r.wg)(),(0,r.iD)("div",{class:"body",style:(0,l.j5)({backgroundImage:`url(${g.value.coverImage})`,backgroundColor:`${g.value.coverColor}`})},[(0,r._)("div",s,[(0,r._)("audio",{hidden:!f.value,loop:"",controls:"",src:g.value.coverAudio,onCanplaythrough:a[0]||(a[0]=e=>f.value=!0)},null,40,i)]),(0,r.Wm)(u,{class:"extra",size:70},{default:(0,r.w5)((()=>[void 0!==g.value.mapId&&void 0==y.value?((0,r.wg)(),(0,r.j4)(t,{key:0,size:"large",type:"primary",onClick:b},{default:(0,r.w5)((()=>[v])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(t,{size:"large",onClick:w},{default:(0,r.w5)((()=>[p])),_:1}),g.value.order+1<h.value.length?((0,r.wg)(),(0,r.j4)(t,{key:1,size:"large",type:"primary",onClick:I},{default:(0,r.w5)((()=>[m])),_:1})):(0,r.kq)("",!0)])),_:1}),(0,r.Wm)(n,{class:"container"},{default:(0,r.w5)((()=>[(0,r.Wm)(o,{class:"markdown",text:k.value},null,8,["text"]),void 0!==y.value?((0,r.wg)(),(0,r.j4)(c["default"],{key:0,src:"?roomid="+y.value},null,8,["src"])):(0,r.kq)("",!0)])),_:1})],4)}}}),g=t(40089);const k=(0,g.Z)(f,[["__scopeId","data-v-ed010cea"]]);var h=k},15206:function(e,a,t){t.r(a),t.d(a,{default:function(){return f}});var r=t(73396),l=t(44870),u=t(84495),o=t(70678);const n={class:"container",style:{height:"500px"}},c={class:"toolbar"},d=(0,r.Uk)("进入战场"),s=["src"],i=(0,r.Uk)("exit");var v=(0,r.aZ)({name:"EgretView",props:{src:null},setup(e,{emit:a}){const t=e,v=((0,l.iH)(null),(0,o.yj)()),p=(0,l.iH)(t.src),m=(0,l.iH)(!1),f=()=>{u.v&&(console.log(navigator.userAgent.toLowerCase()),m.value?document.exitFullscreen():document.documentElement.requestFullscreen()),m.value=!m.value};return(0,r.bv)((()=>{if("/egret"===v.path){if(!v.query.id)return;p.value="?roomid="+v.query.id}})),(e,a)=>{const t=(0,r.up)("el-button");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",c,[(0,r.Wm)(t,{type:"primary",style:{width:"50%"},onClick:f},{default:(0,r.w5)((()=>[d])),_:1})]),m.value?((0,r.wg)(),(0,r.iD)("iframe",{key:0,class:"fullscreen",name:"iframe",src:(0,l.SU)(u.Z).egretUrl+p.value,allow:"fullscreen",frameborder:"0"},"\r\n    ",8,s)):(0,r.kq)("",!0),m.value?((0,r.wg)(),(0,r.j4)(t,{key:1,class:"exit-fullscreen",onClick:a[0]||(a[0]=e=>m.value=!1)},{default:(0,r.w5)((()=>[i])),_:1})):(0,r.kq)("",!0)])}}}),p=t(40089);const m=(0,p.Z)(v,[["__scopeId","data-v-4333aefa"]]);var f=m}}]);
//# sourceMappingURL=172.e869a2bd.js.map