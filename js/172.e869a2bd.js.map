{"version":3,"file":"js/172.e869a2bd.js","mappings":"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","sources":["webpack://advancedwar_vue/./node_modules/vue-loader/dist/exportHelper.js","webpack://advancedwar_vue/./node_modules/vue-loader/dist/index.js","webpack://advancedwar_vue/./src/views/BattleView/CompaignText.vue","webpack://advancedwar_vue/./src/views/EgretView/EgretView.vue"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, normalizeStyle as _normalizeStyle, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-ed010cea\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"audio\" }\nconst _hoisted_2 = [\"hidden\", \"src\"]\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"begin\")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"back\")\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"next chapter\")\n\nimport { reactive, onMounted, ref } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\n// @ts-ignore\r\nimport { OutputProps } from \"@/components/Info/InfoProps\";\r\n// @ts-ignore\r\nimport EgretViewVue from \"../EgretView/EgretView.vue\";\r\nimport * as AXIOS from \"../../store/axios\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  name: 'CompaignText',\n  setup(__props) {\n\r\nconst store = useStore();\r\nconst router = useRouter();\r\n\r\nconst audio_visiable = ref(false);\r\n\r\nconst chapter_data = ref<OutputProps.InfoChapterProps>({\r\n  chapterId: 0,\r\n  title: \"\",\r\n  coverColor: \"\",\r\n  coverImage: \"\",\r\n  coverAudio: \"\",\r\n\r\n  mapId: undefined,\r\n  order: 0,\r\n  battleId: 0,\r\n});\r\nconst chapter_value = ref(\"# error\");\r\nconst chapters = ref<OutputProps.InfoChapterProps[]>([]);\r\nconst room_id = ref<string | undefined>(undefined);\r\n\r\nconst handle_back = () => {\r\n  router.push({\r\n    path: \"/battle\",\r\n    query: { id: router.currentRoute.value.query.battleId },\r\n  });\r\n};\r\n\r\nconst handle_forward = () => {\r\n  let new_chapter = chapters.value.find(\r\n    (item) => item.order === chapter_data.value.order + 1\r\n  );\r\n  console.log('battle', new_chapter)\r\n  router.push({\r\n    path: \"/text\",\r\n    query: { battleId: router.currentRoute.value.query.battleId, id: new_chapter?.chapterId },\r\n  });\r\n  // @ts-ignore\r\n  loadData(parseInt(new_chapter?.chapterId))\r\n};\r\n\r\nconst handle_begin = () => {\r\n  AXIOS.getRoomId({\r\n    token: store.state.userinfo.token,\r\n    mapId: chapter_data.value.mapId as number,\r\n    ownerDsc: \"personal game\",\r\n    personal: true,\r\n  }).then(response=>{\r\n    console.log('response', response.data)\r\n    room_id.value = response.data['data']\r\n  })\r\n};\r\n\r\nconst loadData = (chapter_id: number) => {\r\n  let battle_id = parseInt(router.currentRoute.value.query.battleId as string);\r\n  // let chapter_id = parseInt(router.currentRoute.value.query.id as string);\r\n  if (isNaN(battle_id) || isNaN(chapter_id)) {\r\n    return;\r\n  }\r\n  AXIOS.getBattleChapters({ battleId: battle_id }).then((response) => {\r\n    // @ts-ignore\r\n    chapters.value = response.data[\"data\"];\r\n    chapter_data.value = chapters.value.find(\r\n      (item) => item.chapterId == chapter_id\r\n    ) as OutputProps.InfoChapterProps;\r\n    console.log(chapter_data.value, '88hou')\r\n  });\r\n\r\n  AXIOS.getChapterValue({ chapterId: chapter_id }).then((response) => {\r\n    chapter_value.value = response.data[\"data\"];\r\n  });\r\n\r\n}\r\n\r\nonMounted(() => {\r\n  \r\n  let chapter_id = router.currentRoute.value.query.id as string;\r\n  loadData(parseInt(chapter_id))\r\n\r\n\r\n  // let battle_id = parseInt(router.currentRoute.value.query.battleId as string);\r\n  // let chapter_id = parseInt(router.currentRoute.value.query.id as string);\r\n  // if (isNaN(battle_id) || isNaN(chapter_id)) {\r\n  //   return;\r\n  // }\r\n  // AXIOS.getBattleChapters({ battleId: battle_id }).then((response) => {\r\n  //   chapters.value = response.data[\"data\"];\r\n  //   chapter_data.value = chapters.value.find(\r\n  //     (item) => item.chapterId == chapter_id\r\n  //   ) as OutputProps.InfoChapterProps;\r\n  // });\r\n\r\n  // AXIOS.getChapterValue({ chapterId: chapter_id }).then((response) => {\r\n  //   chapter_value.value = response.data[\"data\"];\r\n  // });\r\n\r\n/******* */\r\n  // store.commit({\r\n  //     type: SET_BATTLE,\r\n  //     compaigns: test_data\r\n  // })\r\n  // get data\r\n  //   let tmp_data = store.state.nowBattle.mapList[store.state.battlePoint];\r\n\r\n  //   if (store.state.battlePoint + 1 >= store.state.nowBattle.mapList.length) {\r\n  //     point_state.value = 1;\r\n  //   } else if (store.state.battlePoint === 0) {\r\n  //     point_state.value = -1;\r\n  //   } else {\r\n  //     point_state.value = 0;\r\n  //   }\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_space = _resolveComponent(\"el-space\")!\n  const _component_v_md_preview = _resolveComponent(\"v-md-preview\")!\n  const _component_el_scrollbar = _resolveComponent(\"el-scrollbar\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"body\",\n    style: _normalizeStyle({\r\n      backgroundImage: `url(${chapter_data.value.coverImage})`,\r\n      backgroundColor: `${chapter_data.value.coverColor}`,\r\n    })\n  }, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"audio\", {\n        hidden: !audio_visiable.value,\n        loop: \"\",\n        controls: \"\",\n        src: chapter_data.value.coverAudio,\n        onCanplaythrough: _cache[0] || (_cache[0] = ($event: any) => (audio_visiable.value = true))\n      }, null, 40, _hoisted_2)\n    ]),\n    _createVNode(_component_el_space, {\n      class: \"extra\",\n      size: 70\n    }, {\n      default: _withCtx(() => [\n        (chapter_data.value.mapId !== undefined&&room_id.value==undefined)\n          ? (_openBlock(), _createBlock(_component_el_button, {\n              key: 0,\n              size: \"large\",\n              type: \"primary\",\n              onClick: handle_begin\n            }, {\n              default: _withCtx(() => [\n                _hoisted_3\n              ]),\n              _: 1\n            }))\n          : _createCommentVNode(\"\", true),\n        _createVNode(_component_el_button, {\n          size: \"large\",\n          onClick: handle_back\n        }, {\n          default: _withCtx(() => [\n            _hoisted_4\n          ]),\n          _: 1\n        }),\n        (chapter_data.value.order + 1 < chapters.value.length)\n          ? (_openBlock(), _createBlock(_component_el_button, {\n              key: 1,\n              size: \"large\",\n              type: \"primary\",\n              onClick: handle_forward\n            }, {\n              default: _withCtx(() => [\n                _hoisted_5\n              ]),\n              _: 1\n            }))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_el_scrollbar, { class: \"container\" }, {\n      default: _withCtx(() => [\n        _createVNode(_component_v_md_preview, {\n          class: \"markdown\",\n          text: chapter_value.value\n        }, null, 8, [\"text\"]),\n        (room_id.value!==undefined)\n          ? (_openBlock(), _createBlock(EgretViewVue, {\n              key: 0,\n              src: '?roomid=' + room_id.value\n            }, null, 8, [\"src\"]))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _: 1\n    })\n  ], 4))\n}\n}\n\n})","import script from \"./CompaignText.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CompaignText.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CompaignText.vue?vue&type=style&index=0&id=ed010cea&scoped=true&lang=css\"\n\nimport exportComponent from \"E:\\\\workspace\\\\MyAdvanceWars\\\\advancedwar_vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ed010cea\"]])\n\nexport default __exports__","import script from \"./EgretView.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./EgretView.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./EgretView.vue?vue&type=style&index=0&id=4333aefa&scoped=true&lang=css\"\n\nimport exportComponent from \"E:\\\\workspace\\\\MyAdvanceWars\\\\advancedwar_vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4333aefa\"]])\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","_hoisted_1","class","_hoisted_2","_hoisted_3","_createTextVNode","_hoisted_4","_hoisted_5","_defineComponent","name","setup","__props","store","useStore","router","useRouter","audio_visiable","ref","chapter_data","chapterId","title","coverColor","coverImage","coverAudio","mapId","undefined","order","battleId","chapter_value","chapters","room_id","handle_back","push","path","query","id","currentRoute","value","handle_forward","new_chapter","find","item","console","log","loadData","parseInt","handle_begin","AXIOS","token","state","userinfo","ownerDsc","personal","then","response","data","chapter_id","battle_id","isNaN","onMounted","_ctx","_cache","_component_el_button","_resolveComponent","_component_el_space","_component_v_md_preview","_component_el_scrollbar","_openBlock","_createElementBlock","style","_normalizeStyle","backgroundImage","backgroundColor","_createElementVNode","hidden","loop","controls","src","onCanplaythrough","$event","_createVNode","size","default","_withCtx","_createBlock","type","onClick","_","_createCommentVNode","length","text","EgretViewVue","__exports__","height","emit","route","useRoute","urlpath","isfullscreen","handleFullscreen","IS_PHONE","navigator","userAgent","toLowerCase","document","exitFullscreen","documentElement","requestFullscreen","width","_unref","NetConfig","egretUrl","allow","frameborder"],"sourceRoot":""}