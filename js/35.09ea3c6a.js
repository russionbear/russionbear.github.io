"use strict";(self["webpackChunkadvancedwar_vue"]=self["webpackChunkadvancedwar_vue"]||[]).push([[35],{40089:function(e,a){a.Z=(e,a)=>{const l=e.__vccOpts||e;for(const[t,o]of a)l[t]=o;return l}},70035:function(e,a,l){l.r(a),l.d(a,{default:function(){return y}});var t=l(73396),o=l(44870),s=l(18678),n=l(42807),u=l(70678),c=l(20065),d=l(21851),m=l(29905);const r=e=>((0,t.dD)("data-v-53407c26"),e=e(),(0,t.Cn)(),e),i={class:"bg"},p={class:"container"},w=r((()=>(0,t._)("h2",null,"login",-1))),f=(0,t.Uk)("获取验证码"),g=(0,t.Uk)("Submit");var _=(0,t.aZ)({name:"LoginView",setup(e){const a=(0,c.oR)(),l=(0,u.tv)(),r="https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg",_=(0,o.iH)(),h=(0,o.qj)({account:"",password:"",code:"",isPasswd:!0}),v=e=>{e&&e.validate((e=>{if(!e)return console.log("error submit!"),!1;{if(""===h.account||""===h.code&&!h.isPasswd)return void(0,n.z8)({message:"信息不完整",type:"warning"});let e={};s.GS(h.account)?e["email"]=h.account:(console.log("username login"),e["username"]=h.account),h.isPasswd?e["password"]=h.password:e["code"]=h.code,s.$_(e).then((e=>{console.log(e),0===e.data["status"]?((0,d.d8)("token",e.data["token"],30),l.push("/index/"),a.commit({type:m.hF})):(0,n.z8)({message:`error code:${e.data["status"]}`,type:"warning"})})).catch((e=>{(0,n.z8)({message:e,type:"warning"})}))}}))},y=()=>{s.GS(h.account)?s.Ob({email:h.account}).then((e=>{(0,n.z8)({message:"已发送",type:"success"})})):s.Ob({username:h.account}).then((e=>{(0,n.z8)({message:"已发送",type:"success"})}))};return(e,a)=>{const l=(0,t.up)("el-image"),o=(0,t.up)("el-form-item"),s=(0,t.up)("el-switch"),n=(0,t.up)("el-input"),u=(0,t.up)("el-button"),c=(0,t.up)("el-space"),d=(0,t.up)("el-form");return(0,t.wg)(),(0,t.iD)("div",i,[(0,t._)("div",p,[(0,t.Wm)(l,{class:"image",src:r,fit:"cover"}),(0,t.Wm)(d,{ref_key:"ruleFormRef",ref:_,model:h,"status-icon":"","label-width":"120px",class:"demo-ruleForm"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,null,{default:(0,t.w5)((()=>[w])),_:1}),(0,t.Wm)(o,{prop:"isPasswd"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{modelValue:h.isPasswd,"onUpdate:modelValue":a[0]||(a[0]=e=>h.isPasswd=e),"active-text":"密码登录","inactive-text":"验证码登录"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(o,{prop:"account",label:"账号"},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{modelValue:h.account,"onUpdate:modelValue":a[1]||(a[1]=e=>h.account=e),placeholder:"邮箱/用户名",minlength:1},null,8,["modelValue"])])),_:1}),h.isPasswd?((0,t.wg)(),(0,t.j4)(o,{key:0,label:"密码",prop:"password"},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{modelValue:h.password,"onUpdate:modelValue":a[2]||(a[2]=e=>h.password=e),type:"password",autocomplete:"off",maxlength:16},null,8,["modelValue"])])),_:1})):((0,t.wg)(),(0,t.j4)(o,{key:1,label:"code",prop:"code"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Wm)(n,{modelValue:h.code,"onUpdate:modelValue":a[3]||(a[3]=e=>h.code=e),modelModifiers:{number:!0},style:{width:"100px"},maxlength:6,minlength:6},null,8,["modelValue"]),(0,t.Wm)(u,{type:"primary",onClick:y},{default:(0,t.w5)((()=>[f])),_:1})])),_:1})])),_:1})),(0,t.Wm)(o,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u,{type:"primary",onClick:a[4]||(a[4]=e=>v(_.value))},{default:(0,t.w5)((()=>[g])),_:1})])),_:1})])),_:1},8,["model"])])])}}}),h=l(40089);const v=(0,h.Z)(_,[["__scopeId","data-v-53407c26"]]);var y=v}}]);
//# sourceMappingURL=35.09ea3c6a.js.map