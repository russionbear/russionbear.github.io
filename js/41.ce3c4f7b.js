"use strict";(self["webpackChunkadvancedwar_vue"]=self["webpackChunkadvancedwar_vue"]||[]).push([[41],{40089:function(e,a){a.Z=(e,a)=>{const t=e.__vccOpts||e;for(const[l,o]of a)t[l]=o;return t}},31041:function(e,a,t){t.r(a),t.d(a,{default:function(){return b}});var l=t(73396),o=t(44870),s=t(18678),u=t(42807),n=t(70678),d=t(20065),c=t(21851),r=t(29905),m=t(84495);const i=e=>((0,l.dD)("data-v-2957d3e1"),e=e(),(0,l.Cn)(),e),p={class:"bg"},w={class:"container"},f=i((()=>(0,l._)("h2",null,"login",-1))),g=(0,l.Uk)("获取验证码"),_=(0,l.Uk)("Submit"),h=(0,l.Uk)(" 未注册？ "),v=(0,l.Uk)("register");var k=(0,l.aZ)({name:"LoginView",setup(e){const a=(0,d.oR)(),t=(0,n.tv)(),i="https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg",k=(0,o.iH)(),y=(0,o.qj)({account:"",password:"",code:"",isPasswd:!0}),W=e=>{e&&e.validate((e=>{if(!e)return console.log("error submit!"),!1;{if(""===y.account||""===y.code&&!y.isPasswd)return void(0,u.z8)({message:"信息不完整",type:"warning"});let e={};s.GS(y.account)?e["email"]=y.account:(console.log("username login"),e["username"]=y.account),y.isPasswd?e["password"]=y.password:e["code"]=y.code,s.$_(e).then((e=>{console.log(e),0===e.data["status"]?((0,c.d8)("token",e.data["token"],30),t.push("/index/"),a.commit({type:r.hF})):(0,u.z8)({message:`error code:${e.data["status"]}`,type:"warning"})})).catch((e=>{(0,u.z8)({message:e,type:"warning"})}))}}))},b=()=>{s.GS(y.account)?s.Ob({email:y.account}).then((e=>{(0,u.z8)({message:"已发送",type:"success"})})):s.Ob({username:y.account}).then((e=>{(0,u.z8)({message:"已发送",type:"success"})}))},V=()=>{t.push({path:"/register"})};return(e,a)=>{const t=(0,l.up)("el-image"),s=(0,l.up)("el-form-item"),u=(0,l.up)("el-switch"),n=(0,l.up)("el-input"),d=(0,l.up)("el-button"),c=(0,l.up)("el-space"),r=(0,l.up)("el-form");return(0,l.wg)(),(0,l.iD)("div",p,[(0,l._)("div",w,[(0,o.SU)(m.v)?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(t,{key:0,class:"image",src:i,fit:"cover"})),(0,l.Wm)(r,{ref_key:"ruleFormRef",ref:k,model:y,"status-icon":"","label-width":"120px",class:"demo-ruleForm"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[f])),_:1}),(0,l.Wm)(s,{prop:"isPasswd"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:y.isPasswd,"onUpdate:modelValue":a[0]||(a[0]=e=>y.isPasswd=e),"active-text":"密码登录","inactive-text":"验证码登录"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(s,{prop:"account",label:"账号"},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{modelValue:y.account,"onUpdate:modelValue":a[1]||(a[1]=e=>y.account=e),placeholder:"邮箱/用户名",minlength:1},null,8,["modelValue"])])),_:1}),y.isPasswd?((0,l.wg)(),(0,l.j4)(s,{key:0,label:"密码",prop:"password"},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{modelValue:y.password,"onUpdate:modelValue":a[2]||(a[2]=e=>y.password=e),type:"password",autocomplete:"off",maxlength:16},null,8,["modelValue"])])),_:1})):((0,l.wg)(),(0,l.j4)(s,{key:1,label:"code",prop:"code"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(n,{modelValue:y.code,"onUpdate:modelValue":a[3]||(a[3]=e=>y.code=e),modelModifiers:{number:!0},style:{width:"100px"},maxlength:6,minlength:6},null,8,["modelValue"]),(0,l.Wm)(d,{type:"primary",onClick:b},{default:(0,l.w5)((()=>[g])),_:1})])),_:1})])),_:1})),(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{type:"primary",onClick:a[4]||(a[4]=e=>W(k.value))},{default:(0,l.w5)((()=>[_])),_:1})])),_:1}),(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[h,(0,l.Wm)(d,{type:"text",onClick:V},{default:(0,l.w5)((()=>[v])),_:1})])),_:1})])),_:1},8,["model"])])])}}}),y=t(40089);const W=(0,y.Z)(k,[["__scopeId","data-v-2957d3e1"]]);var b=W}}]);
//# sourceMappingURL=41.ce3c4f7b.js.map