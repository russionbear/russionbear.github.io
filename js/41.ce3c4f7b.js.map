{"version":3,"file":"js/41.ce3c4f7b.js","mappings":"2HAIAA,EAAQ,EAAU,CAACC,EAAKC,KACpB,MAAMC,EAASF,EAAIG,WAAaH,EAChC,IAAK,MAAOI,EAAKC,KAAQJ,EACrBC,EAAOE,GAAOC,EAElB,OAAOH,I,0KCNX,MAAMI,EAAeC,KAAMC,EAAAA,EAAAA,IAAa,mBAAmBD,EAAEA,KAAIE,EAAAA,EAAAA,MAAcF,GACzEG,EAAa,CAAEC,MAAO,MACtBC,EAAa,CAAED,MAAO,aACtBE,EAA2BP,GAAa,KAAmBQ,EAAAA,EAAAA,GAAoB,KAAM,KAAM,SAAU,KACrGC,GAA0BC,EAAAA,EAAAA,IAAiB,SAC3CC,GAA0BD,EAAAA,EAAAA,IAAiB,UAC3CE,GAA0BF,EAAAA,EAAAA,IAAiB,UAC3CG,GAA0BH,EAAAA,EAAAA,IAAiB,YAajD,OAA4BI,EAAAA,EAAAA,IAAiB,CAC3CC,KAAM,YACNC,MAAMC,GAER,MAAMC,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MAETC,EACJ,0EAEIC,GAAcC,EAAAA,EAAAA,MAEdC,GAAWC,EAAAA,EAAAA,IAAS,CACxBC,QAAS,GACTC,SAAU,GACVC,KAAM,GACNC,UAAU,IAGNC,EAAcC,IACbA,GACLA,EAAOC,UAAUC,IACf,IAAIA,EAwDF,OADAC,QAAQC,IAAI,kBACL,EAxDE,CAET,GACuB,KAArBX,EAASE,SACU,KAAlBF,EAASI,OAAgBJ,EAASK,SAMnC,YAJAO,EAAAA,EAAAA,IAAU,CACRC,QAAS,QACTC,KAAM,YAKV,IAAIC,EAAiB,GAChBC,EAAAA,GAAkBhB,EAASE,SAI9Ba,EAAU,SAAWf,EAASE,SAH9BQ,QAAQC,IAAI,kBACZI,EAAU,YAAcf,EAASE,SAK/BF,EAASK,SACXU,EAAU,YAAcf,EAASG,SAEjCY,EAAU,QAAUf,EAASI,KAE/BY,EAAAA,GAAeD,GACZE,MAAMC,IACLR,QAAQC,IAAIO,GACiB,IAA1BA,EAASC,KAAK,YAQjBC,EAAAA,EAAAA,IAAU,QAASF,EAASC,KAAK,SAAU,IAQ3CxB,EAAO0B,KAAK,WACZ5B,EAAM6B,OAAO,CAACR,KAAMS,EAAAA,OAhBlBX,EAAAA,EAAAA,IAAU,CACRC,QAAQ,cAAcK,EAASC,KAAK,YACpCL,KAAM,eAgBXU,OAAOC,KACNb,EAAAA,EAAAA,IAAU,CACRC,QAASY,EACTX,KAAM,oBAUZY,EAAc,KACdV,EAAAA,GAAkBhB,EAASE,SAQ7Bc,EAAAA,GAAkB,CAACW,MAAM3B,EAASE,UAAUe,MAAKC,KAC/CN,EAAAA,EAAAA,IAAU,CACRC,QAAS,MACTC,KAAM,eAVVE,EAAAA,GAAkB,CAACY,SAAS5B,EAASE,UAAUe,MAAKC,KAClDN,EAAAA,EAAAA,IAAU,CACRC,QAAS,MACTC,KAAM,gBAaRe,EAAkB,KACtBlC,EAAO0B,KAAK,CAACS,KAAM,cAGrB,MAAO,CAACC,EAAUC,KAChB,MAAMC,GAAsBC,EAAAA,EAAAA,IAAkB,YACxCC,GAA0BD,EAAAA,EAAAA,IAAkB,gBAC5CE,GAAuBF,EAAAA,EAAAA,IAAkB,aACzCG,GAAsBH,EAAAA,EAAAA,IAAkB,YACxCI,GAAuBJ,EAAAA,EAAAA,IAAkB,aACzCK,GAAsBL,EAAAA,EAAAA,IAAkB,YACxCM,GAAqBN,EAAAA,EAAAA,IAAkB,WAE7C,OAAQO,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAO/D,EAAY,EAC3DI,EAAAA,EAAAA,GAAoB,MAAOF,EAAY,EACnC8D,EAAAA,EAAAA,IAAOC,EAAAA,IAOLC,EAAAA,EAAAA,IAAoB,IAAI,KANvBJ,EAAAA,EAAAA,OAAcK,EAAAA,EAAAA,IAAab,EAAqB,CAC/C5D,IAAK,EACLO,MAAO,QACPmE,IAAKlD,EACLmD,IAAK,YAGXC,EAAAA,EAAAA,IAAaT,EAAoB,CAC/BU,QAAS,cACTnD,IAAKD,EACLqD,MAAOnD,EACP,cAAe,GACf,cAAe,QACfpB,MAAO,iBACN,CACDwE,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBJ,EAAAA,EAAAA,IAAad,EAAyB,KAAM,CAC1CiB,SAASC,EAAAA,EAAAA,KAAS,IAAM,CACtBvE,KAEFwE,EAAG,KAELL,EAAAA,EAAAA,IAAad,EAAyB,CAAEoB,KAAM,YAAc,CAC1DH,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBJ,EAAAA,EAAAA,IAAab,EAAsB,CACjCoB,WAAYxD,EAASK,SACrB,sBAAuB2B,EAAO,KAAOA,EAAO,GAAMyB,GAAkBzD,EAASK,SAAYoD,GACzF,cAAe,OACf,gBAAiB,SAChB,KAAM,EAAG,CAAC,kBAEfH,EAAG,KAELL,EAAAA,EAAAA,IAAad,EAAyB,CACpCoB,KAAM,UACNG,MAAO,MACN,CACDN,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBJ,EAAAA,EAAAA,IAAaZ,EAAqB,CAChCmB,WAAYxD,EAASE,QACrB,sBAAuB8B,EAAO,KAAOA,EAAO,GAAMyB,GAAkBzD,EAASE,QAAWuD,GACxFE,YAAa,SACbC,UAAW,GACV,KAAM,EAAG,CAAC,kBAEfN,EAAG,IAEJtD,EAASK,WACLoC,EAAAA,EAAAA,OAAcK,EAAAA,EAAAA,IAAaX,EAAyB,CACnD9D,IAAK,EACLqF,MAAO,KACPH,KAAM,YACL,CACDH,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBJ,EAAAA,EAAAA,IAAaZ,EAAqB,CAChCmB,WAAYxD,EAASG,SACrB,sBAAuB6B,EAAO,KAAOA,EAAO,GAAMyB,GAAkBzD,EAASG,SAAYsD,GACzF3C,KAAM,WACN+C,aAAc,MACdC,UAAW,IACV,KAAM,EAAG,CAAC,kBAEfR,EAAG,OAEJb,EAAAA,EAAAA,OAAcK,EAAAA,EAAAA,IAAaX,EAAyB,CACnD9D,IAAK,EACLqF,MAAO,OACPH,KAAM,QACL,CACDH,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBJ,EAAAA,EAAAA,IAAaV,EAAqB,KAAM,CACtCa,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBJ,EAAAA,EAAAA,IAAaZ,EAAqB,CAChCmB,WAAYxD,EAASI,KACrB,sBAAuB4B,EAAO,KAAOA,EAAO,GAAMyB,GAAkBzD,EAASI,KAAQqD,GACrFM,eAAgB,CAAEC,QAAQ,GAC1BC,MAAO,CAAC,MAAQ,SAChBH,UAAW,EACXF,UAAW,GACV,KAAM,EAAG,CAAC,gBACbX,EAAAA,EAAAA,IAAaX,EAAsB,CACjCxB,KAAM,UACNoD,QAASxC,GACR,CACD0B,SAASC,EAAAA,EAAAA,KAAS,IAAM,CACtBrE,KAEFsE,EAAG,OAGPA,EAAG,OAGPA,EAAG,MAETL,EAAAA,EAAAA,IAAad,EAAyB,KAAM,CAC1CiB,SAASC,EAAAA,EAAAA,KAAS,IAAM,EACtBJ,EAAAA,EAAAA,IAAaX,EAAsB,CACjCxB,KAAM,UACNoD,QAASlC,EAAO,KAAOA,EAAO,GAAMyB,GAAiBnD,EAAWR,EAAYqE,SAC3E,CACDf,SAASC,EAAAA,EAAAA,KAAS,IAAM,CACtBnE,KAEFoE,EAAG,OAGPA,EAAG,KAELL,EAAAA,EAAAA,IAAad,EAAyB,KAAM,CAC1CiB,SAASC,EAAAA,EAAAA,KAAS,IAAM,CACtBlE,GACA8D,EAAAA,EAAAA,IAAaX,EAAsB,CACjCxB,KAAM,OACNoD,QAASrC,GACR,CACDuB,SAASC,EAAAA,EAAAA,KAAS,IAAM,CACtBjE,KAEFkE,EAAG,OAGPA,EAAG,OAGPA,EAAG,GACF,EAAG,CAAC,kB,WCpQb,MAAMc,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE","sources":["webpack://advancedwar_vue/./node_modules/vue-loader/dist/exportHelper.js","webpack://advancedwar_vue/./node_modules/vue-loader/dist/index.js","webpack://advancedwar_vue/./src/views/LoginView/LoginView.vue"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-2957d3e1\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"bg\" }\nconst _hoisted_2 = { class: \"container\" }\nconst _hoisted_3 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"login\", -1))\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"获取验证码\")\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\"Submit\")\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" 未注册？ \")\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\"register\")\n\nimport { reactive, ref } from \"vue\";\r\nimport type { FormInstance } from \"element-plus\";\r\nimport * as AXIOS from \"../../store/axios\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nimport { setCookie } from \"../../store/cookie\";\r\nimport { READ_COOKIE } from \"../../store/actions\";\r\n//@ts-ignore\r\nimport { IS_PHONE } from \"@/config/net.cfg\";\r\n\nexport default /*#__PURE__*/_defineComponent({\n  name: 'LoginView',\n  setup(__props) {\n\r\nconst store = useStore()\r\nconst router = useRouter();\r\n\r\nconst url =\r\n  \"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg\";\r\n\r\nconst ruleFormRef = ref<FormInstance>();\r\n\r\nconst ruleForm = reactive({\r\n  account: \"\",\r\n  password: \"\",\r\n  code: \"\",\r\n  isPasswd: true,\r\n});\r\n\r\nconst submitForm = (formEl: FormInstance | undefined) => {\r\n  if (!formEl) return;\r\n  formEl.validate((valid) => {\r\n    if (valid) {\r\n\r\n      if (\r\n        ruleForm.account === \"\" ||\r\n        (ruleForm.code === \"\" && !ruleForm.isPasswd)\r\n      ) {\r\n        ElMessage({\r\n          message: \"信息不完整\",\r\n          type: \"warning\",\r\n        });\r\n        return;\r\n      }\r\n\r\n      let from_data: any = {};\r\n      if (!AXIOS.checkIsMail(ruleForm.account)) {\r\n        console.log(\"username login\");\r\n        from_data[\"username\"] = ruleForm.account;\r\n      } else {\r\n        from_data[\"email\"] = ruleForm.account;\r\n      }\r\n\r\n      if (ruleForm.isPasswd) {\r\n        from_data[\"password\"] = ruleForm.password;\r\n      } else {\r\n        from_data[\"code\"] = ruleForm.code;\r\n      }\r\n      AXIOS.subLogin(from_data)\r\n        .then((response) => {\r\n          console.log(response);\r\n          if(response.data['status']!==0){\r\n            ElMessage({\r\n              message:`error code:${response.data['status']}`,\r\n              type: \"warning\"\r\n            })\r\n\r\n            return\r\n          }\r\n          setCookie(\"token\", response.data['token'], 30)\r\n          // console.log(store.state.lastRouter, 'last')\r\n          // if(store.state.lastRouter==='/register'){\r\n          //   router.push(\"/index/\")\r\n          // }else{\r\n          //   router.back()\r\n          //   console.log(router.currentRoute.value.fullPath)\r\n          // }\r\n          router.push(\"/index/\")\r\n          store.commit({type: READ_COOKIE})\r\n        })\r\n        .catch((error) => {\r\n          ElMessage({\r\n            message: error,\r\n            type: \"warning\",\r\n          });\r\n        });\r\n    } else {\r\n      console.log(\"error submit!\");\r\n      return false;\r\n    }\r\n  });\r\n};\r\n\r\nconst handle_send = () => {\r\n  if(!AXIOS.checkIsMail(ruleForm.account)){\r\n    AXIOS.getMailCode({username:ruleForm.account}).then(response=>{\r\n      ElMessage({\r\n        message: \"已发送\",\r\n        type: \"success\"\r\n      })\r\n    })\r\n  }else{\r\n    AXIOS.getMailCode({email:ruleForm.account}).then(response=>{\r\n      ElMessage({\r\n        message: \"已发送\",\r\n        type: \"success\"\r\n      })\r\n    })\r\n  }\r\n};\r\n\r\nconst handle_register = ()=>{\r\n  router.push({path: \"register\"})\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_image = _resolveComponent(\"el-image\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_switch = _resolveComponent(\"el-switch\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_space = _resolveComponent(\"el-space\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      (!_unref(IS_PHONE))\n        ? (_openBlock(), _createBlock(_component_el_image, {\n            key: 0,\n            class: \"image\",\n            src: url,\n            fit: \"cover\"\n          }))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_component_el_form, {\n        ref_key: \"ruleFormRef\",\n        ref: ruleFormRef,\n        model: ruleForm,\n        \"status-icon\": \"\",\n        \"label-width\": \"120px\",\n        class: \"demo-ruleForm\"\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_el_form_item, null, {\n            default: _withCtx(() => [\n              _hoisted_3\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_form_item, { prop: \"isPasswd\" }, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_switch, {\n                modelValue: ruleForm.isPasswd,\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((ruleForm.isPasswd) = $event)),\n                \"active-text\": \"密码登录\",\n                \"inactive-text\": \"验证码登录\"\n              }, null, 8, [\"modelValue\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_form_item, {\n            prop: \"account\",\n            label: \"账号\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_input, {\n                modelValue: ruleForm.account,\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((ruleForm.account) = $event)),\n                placeholder: \"邮箱/用户名\",\n                minlength: 1\n              }, null, 8, [\"modelValue\"])\n            ]),\n            _: 1\n          }),\n          (ruleForm.isPasswd)\n            ? (_openBlock(), _createBlock(_component_el_form_item, {\n                key: 0,\n                label: \"密码\",\n                prop: \"password\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_input, {\n                    modelValue: ruleForm.password,\n                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((ruleForm.password) = $event)),\n                    type: \"password\",\n                    autocomplete: \"off\",\n                    maxlength: 16\n                  }, null, 8, [\"modelValue\"])\n                ]),\n                _: 1\n              }))\n            : (_openBlock(), _createBlock(_component_el_form_item, {\n                key: 1,\n                label: \"code\",\n                prop: \"code\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_space, null, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_el_input, {\n                        modelValue: ruleForm.code,\n                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((ruleForm.code) = $event)),\n                        modelModifiers: { number: true },\n                        style: {\"width\":\"100px\"},\n                        maxlength: 6,\n                        minlength: 6\n                      }, null, 8, [\"modelValue\"]),\n                      _createVNode(_component_el_button, {\n                        type: \"primary\",\n                        onClick: handle_send\n                      }, {\n                        default: _withCtx(() => [\n                          _hoisted_4\n                        ]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })),\n          _createVNode(_component_el_form_item, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_button, {\n                type: \"primary\",\n                onClick: _cache[4] || (_cache[4] = ($event: any) => (submitForm(ruleFormRef.value)))\n              }, {\n                default: _withCtx(() => [\n                  _hoisted_5\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_form_item, null, {\n            default: _withCtx(() => [\n              _hoisted_6,\n              _createVNode(_component_el_button, {\n                type: \"text\",\n                onClick: handle_register\n              }, {\n                default: _withCtx(() => [\n                  _hoisted_7\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 8, [\"model\"])\n    ])\n  ]))\n}\n}\n\n})","import script from \"./LoginView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./LoginView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./LoginView.vue?vue&type=style&index=0&id=2957d3e1&scoped=true&lang=css\"\n\nimport exportComponent from \"E:\\\\workspace\\\\MyAdvanceWars\\\\advancedwar_vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2957d3e1\"]])\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","class","_hoisted_2","_hoisted_3","_createElementVNode","_hoisted_4","_createTextVNode","_hoisted_5","_hoisted_6","_hoisted_7","_defineComponent","name","setup","__props","store","useStore","router","useRouter","url","ruleFormRef","ref","ruleForm","reactive","account","password","code","isPasswd","submitForm","formEl","validate","valid","console","log","ElMessage","message","type","from_data","AXIOS","then","response","data","setCookie","push","commit","READ_COOKIE","catch","error","handle_send","email","username","handle_register","path","_ctx","_cache","_component_el_image","_resolveComponent","_component_el_form_item","_component_el_switch","_component_el_input","_component_el_button","_component_el_space","_component_el_form","_openBlock","_createElementBlock","_unref","IS_PHONE","_createCommentVNode","_createBlock","src","fit","_createVNode","ref_key","model","default","_withCtx","_","prop","modelValue","$event","label","placeholder","minlength","autocomplete","maxlength","modelModifiers","number","style","onClick","value","__exports__"],"sourceRoot":""}