"use strict";(self["webpackChunkadvancedwar_vue"]=self["webpackChunkadvancedwar_vue"]||[]).push([[67],{46540:function(e,t,a){a.d(t,{B:function(){return l},f2:function(){return v},N:function(){return o},H$:function(){return f},F0:function(){return h},HG:function(){return g}});var l={};a.r(l),a.d(l,{BActionType:function(){return p},BattleBuildTypes:function(){return d},BattleGeoTypes:function(){return r},BattleLevelTypes:function(){return i},BattleUnitStateTypes:function(){return u},BattleUnitTypes:function(){return s},BattleWeatherTypes:function(){return n},PlayerFlagTypes:function(){return c}});var o={};a.r(o),a.d(o,{C:function(){return m}});const r=["beach","bridge","forest","lake","mountain","plain","road","rocks","sea"],n=["sunny","snow","hot","rainy"],i=["normal",""],d=["city","airport","capital","factory","shipyard","stronghold"],s=["footmen","B2","CV","aagun","battleship","bigtank","missileship","chariot","conveyor","destroyer","fighter","gunnery","helicopter","howitzer","launchV","scout","submarine","tank","thaad","transportship","motorcycle","elite","aew","transport"],u=["loading","bullet","occupy","oil","supplies","diving","stealth"],c=["red","blue","green","yellow"];var p,m;(function(e){e["wait"]="wait",e["attack"]="attack",e["load"]="load",e["occupy"]="occupy",e["supply"]="supply",e["diving"]="diving",e["buy"]="buy",e["sortie"]="sortie",e["boutEnd"]="boutEnd",e["udpateMap"]="updateMap"})(p||(p={})),function(e){e["action"]="action",e["chat"]="chat",e["IupdateRoomSetting"]="updateRoomSetting",e["IgetRoom"]="getRoom",e["IuserChoose"]="userChoose",e["IgetMap"]="getMap",e["IprovideAI"]="provideAI",e["ItimeoutBout"]="timeoutBout",e["IgetRole"]="getRole",e["OmapInfo"]="mapInfo",e["OroomSetting"]="roomSetting",e["Oresult"]="result",e["Orole"]="role",e["OgameBegin"]="gameBegin"}(m||(m={}));const v=20,f=["","tip","warning","lock","kill"],g={reportId:"id",reportDsc:"dsc",reportUrl:"url",time:"time",from:"from",fromName:"name",fromDanger:{tip:0,warning:0,lock:0},fromResultDsc:"",to:"to",toName:"toName",toDanger:{tip:0,warning:0,lock:0},toResultDsc:""},h={blogId:"id",title:"error",authorId:"id",authorName:"",createTime:"2020",updateTime:"2020",kw:[],dsc:"error",good:0,copyright:""}},40089:function(e,t){t.Z=(e,t)=>{const a=e.__vccOpts||e;for(const[l,o]of t)a[l]=o;return a}},47605:function(e,t,a){a.d(t,{Z:function(){return h}});var l=a(73396),o=a(44870),r=a(87139),n=a(55743),i=a.n(n);const d={key:1,class:"row"},s={class:"row"},u={class:"row"},c={class:"el-dropdown-link"},p=(0,l.Uk)("opera"),m={class:"row fade dsc"};var v=(0,l.aZ)({name:"InfoBattle",props:{data:null,hideImg:{type:Boolean},hideTitle:{type:Boolean},operaBtns:null},setup(e,{emit:t}){const a=e,n=(0,l.Fl)((()=>a.data)),v=e=>{"string"===typeof e?t(e,n.value.battleId.toString()):void 0!==a.operaBtns&&t(a.operaBtns[0],n.value.battleId.toString())};return(t,f)=>{const g=(0,l.up)("el-image"),h=(0,l.up)("el-button"),I=(0,l.up)("el-dropdown-item"),b=(0,l.up)("el-dropdown-menu"),w=(0,l.up)("el-dropdown"),y=(0,l.up)("el-card");return(0,l.wg)(),(0,l.j4)(y,{class:"box-card",shadow:"hover","body-style":{padding:"0px"}},{default:(0,l.w5)((()=>[a.hideImg?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(g,{key:0,class:"data_img",src:(0,o.SU)(n).coverImage,fit:"cover"},null,8,["src"])),a.hideTitle?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("h3",null,(0,r.zw)((0,o.SU)(n).battleName),1)])),(0,l._)("div",s,[(0,l._)("span",null,(0,r.zw)((0,o.SU)(n).authorName),1),(0,l._)("time",null,(0,r.zw)((0,o.SU)(i()).unix((0,o.SU)(n).createTime).format("DD/MM/YYYY")),1)]),(0,l._)("div",u,[(0,l._)("span",null,(0,r.zw)((0,o.SU)(n).playCount),1),void 0!==e.operaBtns&&e.operaBtns.length>1?((0,l.wg)(),(0,l.j4)(w,{key:0,onCommand:v,trigger:"click"},{dropdown:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.operaBtns,(e=>((0,l.wg)(),(0,l.j4)(I,{key:e,command:e},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(e),1)])),_:2},1032,["command"])))),128))])),_:1})])),default:(0,l.w5)((()=>[(0,l._)("span",c,[(0,l.Wm)(h,{type:"primary",size:"small"},{default:(0,l.w5)((()=>[p])),_:1})])])),_:1})):void 0!==e.operaBtns?((0,l.wg)(),(0,l.j4)(h,{key:1,type:"primary",size:"small",onClick:v},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(e.operaBtns[0]),1)])),_:1})):(0,l.kq)("",!0)]),(0,l._)("div",m,(0,r.zw)((0,o.SU)(n).battleDsc),1)])),_:1})}}}),f=a(40089);const g=(0,f.Z)(v,[["__scopeId","data-v-171cdf13"]]);var h=g},16248:function(e,t,a){a.d(t,{Z:function(){return u}});var l=a(73396),o=a(87139),r=a(44870),n=a(70678),i=(0,l.aZ)({name:"MyLinkTo",props:{text:{default:"HOME"},bottom:{default:100},linkType:{default:"home"}},emits:["click"],setup(e,{emit:t}){const a=e,i=(0,n.tv)(),d=(0,l.Fl)((()=>a.text)),s=(0,r.iH)(a.linkType);switch(a.linkType){case"home":s.value="/index";break;case"page":s.value="/user";break;default:break}const u=()=>{"event"===a.linkType?t("click"):i.push({path:s.value})};return(t,a)=>{const n=(0,l.up)("el-button");return(0,l.wg)(),(0,l.j4)(n,{class:"button",type:"primary",round:"",style:(0,o.j5)({bottom:e.bottom+"px"}),onClick:u},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)((0,r.SU)(d)),1)])),_:1},8,["style"])}}}),d=a(40089);const s=(0,d.Z)(i,[["__scopeId","data-v-f6e4511c"]]);var u=s},23067:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var l=a(73396),o=a(87139),r=a(44870),n=a(47605),i=a(46540),d=a(18678),s=a(16248),u=a(42807),c=a(70678),p=a(20065);const m={class:"list"},v={class:"container"},f={class:"dialog-container"},g=(0,l.Uk)("save"),h=(0,l.Uk)("up"),I=(0,l.Uk)("down"),b=(0,l.Uk)("edit"),w=(0,l.Uk)("delete"),y={class:"text-row"},k=(0,l.Uk)(" new text"),_=(0,l.Uk)("check");var V=(0,l.aZ)({name:"UserBattles",setup(e){const t=(0,c.tv)(),a=(0,p.oR)(),V=(0,r.iH)(!1),W=(0,r.qj)([]),U=(0,r.iH)(0),C=()=>{U.value!==Number.MAX_VALUE&&(V.value||(V.value=!0,d.s_({skip:U.value,type:"self",value:a.state.userinfo.email}).then((e=>{e.data["data"]||e.data["data"].length<i.f2?U.value=Number.MAX_VALUE:U.value+=e.data["data"].length,W.push(...e.data["data"])})).catch((()=>{U.value=Number.MAX_VALUE})).finally((()=>{V.value=!1}))))},z=(0,r.qj)({visible:!1,battleId:void 0,mapList:[],battleName:"name",battleDsc:"",version:"",coverImage:"",coverColor:"",coverAudio:""}),L=e=>{d.rK({token:a.state.userinfo.token,battleId:parseInt(e)}).then((t=>{z.battleId=void 0;let a=W.findIndex((t=>t.battleId===parseInt(e)));-1!==a&&W.splice(a,1)})).catch((()=>{(0,u.z8)({message:"error",type:"error"})}))},x=(0,r.iH)(!1),B=()=>{x.value||(x.value=!0,z.battleId,d.Hz({...z,token:a.state.userinfo.token}).then((e=>{z.battleId=e.data["data"],z.visible=!0,d.s_({skip:0,type:"id",value:e.data["data"]}).then((t=>{0!==t.data["data"].length&&(W.splice(0,0,t.data["data"][0]),A(e.data["data"]))}))})).catch((()=>{(0,u.z8)({message:"error",type:"error"})})).finally((()=>{x.value=!1})))},A=e=>{let t=W.find((t=>t.battleId==parseInt(e)));void 0!==t&&((0,u.z8)({message:"loading...",type:"info"}),z.mapList=[],z.battleId=parseInt(e),z.battleName=t.battleName,z.battleDsc=t.battleDsc,z.version=t.version,z.coverAudio=t.coverAudio,z.coverColor=t.coverColor,z.coverImage=t.coverImage,z.visible=!0,d.Fv({battleId:parseInt(e)}).then((e=>{z.mapList=e.data["data"],z.mapList.sort(((e,t)=>e.order>t.order?1:-1))})).catch((()=>{(0,u.z8)({message:" 获取章节数据失败",type:"error"})})))},D=e=>{t.push({path:"/battle",query:{id:e}})},S=(0,r.iH)(!1),T=()=>{""!==z.battleName.replaceAll(" ","")?S.value||(S.value=!0,d.Hz({...z,token:a.state.userinfo.token}).then((e=>{(0,u.z8)({message:"success",type:"success"}),z.battleId=e.data["data"],d.s_({skip:0,type:"id",value:e.data["data"]}).then((t=>{let a=W.findIndex((t=>t.battleId==e.data["data"]));-1===a?W.splice(0,0,t.data["data"][0]):W.splice(a,1,t.data["data"][0])}))})).catch((e=>{(0,u.z8)({message:`code: ${e}`,type:"error"})})).finally((()=>{S.value=!1}))):(0,u.z8)({message:"battle name 为空",type:"warning"})},N=(0,r.qj)({visible:!1,chapterId:-1,coverColor:"",coverImage:"",coverAudio:"",text:"",title:"titile",mapId:void 0}),j=()=>{(0,u.z8)({message:"loading...",type:"info"});let e={chapterId:void 0,text:"",title:"title",order:z.mapList.length,battleId:z.battleId,coverImage:"",coverColor:"",coverAudio:"",mapId:void 0};d.kn({...e,token:a.state.userinfo.token}).then((t=>{e.chapterId=t.data["data"],z.mapList.push(e)}))},H=e=>{let t=z.mapList.findIndex((t=>t.chapterId==e));-1!==t&&d.E6({token:a.state.userinfo.token,chapterId:e}).then((e=>{z.mapList.splice(t,1)})).catch((()=>{(0,u.z8)({message:"error",type:"error"})}))},M=e=>{let t=z.mapList.find((t=>t.chapterId==e));void 0!==t?(N.chapterId=e,N.title=t.title,N.coverImage=t.coverImage,N.coverColor=t.coverColor,N.visible=!0,d.Id({chapterId:e}).then((e=>{N.text=e.data["data"]})).catch((()=>{(0,u.z8)({message:"error",type:"error"})}))):console.log("fsdsdf")},Z=e=>{let t=z.mapList.findIndex((t=>t.chapterId==e));t<=0||d._S({token:a.state.userinfo.token,first:z.mapList[t-1].chapterId,second:e}).then((e=>{z.mapList.splice(t-1,0,z.mapList[t]),z.mapList.splice(t+1,1)}))},E=e=>{let t=z.mapList.findIndex((t=>t.chapterId==e));t+1>=z.mapList.length||d._S({token:a.state.userinfo.token,first:e,second:z.mapList[t+1].chapterId}).then((()=>{z.mapList.splice(t,0,z.mapList[t+1]),z.mapList.splice(t+2,1)}))},R=()=>{N.visible=!1},q=()=>{if(""===N.title?.replaceAll(" ",""))return void(0,u.z8)({message:"标题为空",type:"warning"});if(""===N.text?.replaceAll(" ",""))return void(0,u.z8)({message:"内容为空",type:"warning"});let e=z.mapList.findIndex((e=>e.chapterId==N.chapterId));if(-1===e)return;let t={chapterId:N.chapterId,title:N.title,battleId:z.battleId,coverImage:N.coverImage,coverColor:N.coverColor,mapId:N.mapId,coverAudio:N.coverAudio};d.kn({...t,token:a.state.userinfo.token}).then((e=>{let l=z.mapList.findIndex((e=>e.chapterId==t.chapterId));z.mapList[l]=Object.assign(z.mapList[l],t),d.bY({chapterId:t.chapterId,battleId:t.battleId,token:a.state.userinfo.token,content:N.text}),(0,u.z8)({message:"saved",type:"success"})})).catch((()=>{(0,u.z8)({message:"error",type:"error"})}))},O=()=>{d.IC({skip:0,type:"id",value:N.mapId}).then((e=>{0===e.data["data"].length?(0,u.z8)({message:"error",type:"error"}):(0,u.z8)({message:"exited",type:"success"})})).catch((()=>{(0,u.z8)({message:"error",type:"error"})}))};return(e,t)=>{const a=(0,l.up)("el-skeleton"),r=(0,l.up)("el-input"),i=(0,l.up)("el-form-item"),d=(0,l.up)("el-color-picker"),u=(0,l.up)("el-button"),c=(0,l.up)("el-form"),p=(0,l.up)("el-space"),U=(0,l.up)("el-scrollbar"),x=(0,l.up)("el-dialog"),S=(0,l.up)("v-md-editor"),Y=(0,l.Q2)("infinite-scroll");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.wy)(((0,l.wg)(),(0,l.iD)("ul",m,[(0,l._)("div",v,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(W,(e=>((0,l.wg)(),(0,l.j4)(n.Z,{"btn-name":"enter",class:"item",key:e.battleId,data:e,"opera-btns":["enter","edit","delete"],onEnter:D,onEdit:A,onDelete:L},null,8,["data"])))),128))]),V.value?((0,l.wg)(),(0,l.j4)(a,{key:0,animated:""})):(0,l.kq)("",!0)])),[[Y,C]]),(0,l.Wm)(s.Z,{bottom:150,text:"new","link-type":"event",onClick:B}),(0,l.Wm)(x,{modelValue:z.visible,"onUpdate:modelValue":t[6]||(t[6]=e=>z.visible=e),title:"battle edit"},{default:(0,l.w5)((()=>[(0,l._)("div",f,[(0,l.Wm)(U,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,{inline:!0,class:"demo-form-inline"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{label:"battle name"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{modelValue:z.battleName,"onUpdate:modelValue":t[0]||(t[0]=e=>z.battleName=e),maxlength:32},null,8,["modelValue"])])),_:1}),(0,l.Wm)(i,{label:"battle dsc"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{modelValue:z.battleDsc,"onUpdate:modelValue":t[1]||(t[1]=e=>z.battleDsc=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(i,{label:"version"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{modelValue:z.version,"onUpdate:modelValue":t[2]||(t[2]=e=>z.version=e),maxlength:16},null,8,["modelValue"])])),_:1}),(0,l.Wm)(i,{label:"cover image"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{modelValue:z.coverImage,"onUpdate:modelValue":t[3]||(t[3]=e=>z.coverImage=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(i,{label:"cover color"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{modelValue:z.coverColor,"onUpdate:modelValue":t[4]||(t[4]=e=>z.coverColor=e),"show-alpha":""},null,8,["modelValue"])])),_:1}),(0,l.Wm)(i,{label:"cover audio"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{modelValue:z.coverAudio,"onUpdate:modelValue":t[5]||(t[5]=e=>z.coverAudio=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{type:"primary",onClick:T},{default:(0,l.w5)((()=>[g])),_:1})])),_:1})])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(z.mapList,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"text-row",key:e.mapId},[(0,l._)("h6",null,(0,o.zw)(e.title),1),(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{type:"primary",size:"small",onClick:t=>Z(e.chapterId)},{default:(0,l.w5)((()=>[h])),_:2},1032,["onClick"]),(0,l.Wm)(u,{type:"primary",size:"small",onClick:t=>E(e.chapterId)},{default:(0,l.w5)((()=>[I])),_:2},1032,["onClick"]),(0,l.Wm)(u,{type:"primary",size:"small",onClick:t=>M(e.chapterId)},{default:(0,l.w5)((()=>[b])),_:2},1032,["onClick"]),(0,l.Wm)(u,{type:"danger",size:"small",onClick:t=>H(e.chapterId)},{default:(0,l.w5)((()=>[w])),_:2},1032,["onClick"])])),_:2},1024)])))),128)),(0,l._)("div",y,[(0,l.Wm)(u,{type:"primary",onClick:j},{default:(0,l.w5)((()=>[k])),_:1})])])),_:1})])])),_:1},8,["modelValue"]),(0,l.Wm)(x,{modelValue:N.visible,"onUpdate:modelValue":t[12]||(t[12]=e=>N.visible=e),fullscreen:!0,width:"30%","before-close":R},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{inline:!0,class:"demo-form-inline"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{label:"title"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{modelValue:N.title,"onUpdate:modelValue":t[7]||(t[7]=e=>N.title=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(i,{label:"coverImage"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{modelValue:N.coverImage,"onUpdate:modelValue":t[8]||(t[8]=e=>N.coverImage=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(i,{label:"coverColor"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{modelValue:N.coverColor,"onUpdate:modelValue":t[9]||(t[9]=e=>N.coverColor=e),"show-alpha":""},null,8,["modelValue"])])),_:1}),(0,l.Wm)(i,{label:"mapId"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,{modelValue:N.mapId,"onUpdate:modelValue":t[10]||(t[10]=e=>N.mapId=e)},null,8,["modelValue"]),(0,l.Wm)(u,{type:"primary",onClick:O},{default:(0,l.w5)((()=>[_])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(S,{placeholder:"所写内容不应触犯法律",onSave:q,modelValue:N.text,"onUpdate:modelValue":t[11]||(t[11]=e=>N.text=e),height:"500px"},null,8,["modelValue"])])),_:1},8,["modelValue"])])}}}),W=a(40089);const U=(0,W.Z)(V,[["__scopeId","data-v-8e39f0cc"]]);var C=U}}]);
//# sourceMappingURL=67.895e8a4a.js.map