import{d as y,e as h,o as _,h as k,w as c,f as p,t as x,b as d,i as m,v as C,l as I,s as V,r as b,a as v,F as $,g as z,u as g,x as B,k as L}from"./index-1956f8a2.js";import{_ as W,W as w}from"./localAxios-b17f8d20.js";import{W as D}from"./backend-1e23b029.js";import{i as N}from"./generalConfig-4c4c12a0.js";import{C as S}from"./ChatDialog-1bcff7c9.js";const F={class:"card-container"},P=y({__name:"WatchInfo",props:{watch:null},emits:["delete","chat","visit"],setup(l,{emit:a}){return(r,e)=>{const i=h("el-button"),f=h("el-space"),s=h("el-card");return _(),k(s,{class:"box-card",shadow:"hover"},{default:c(()=>[p("div",F,[p("span",null,x(l.watch.targetname),1),d(f,null,{default:c(()=>[d(i,{type:"primary",size:"small",onClick:e[0]||(e[0]=u=>a("visit",l.watch))},{default:c(()=>[m("visit")]),_:1}),d(i,{type:"primary",size:"small",onClick:e[1]||(e[1]=u=>a("chat",l.watch))},{default:c(()=>[m("chat")]),_:1}),d(i,{size:"small",onClick:e[2]||(e[2]=u=>a("delete",l.watch))},{default:c(()=>[m("delete")]),_:1})]),_:1})])]),_:1})}}});const A=W(P,[["__scopeId","data-v-84917e23"]]),E=y({__name:"WatchListView",setup(l){const a=L(),r=C(),e=I([...Array(0).keys()].map(t=>{const n=new D;return n.userid="userid",n.targetname="sdfsdf",n}));V(()=>{r.token==null&&a.push("/visit/login"),w.getWatched(r.userid,0).then(t=>{console.log(t.data),e.splice(0,e.length,...t.data)})});const i=t=>{a.push(`/visit/selfPage?/${t.targetname}`)},f=t=>{w.deleteOne(r.userid,t.targetid).then(n=>{if(n.data=="1"){for(let o=0;o<e.length;o++)if(e[o].targetid=t.targetid){e.splice(o,1);break}}})},s=b(null),u=t=>{s.value!=null&&(s.value.visible=!0,s.value.refresh(t.targetname,t.targetid))};return(t,n)=>(_(),v("div",{class:"container",style:B({width:g(N)?"100%":"50%"})},[(_(!0),v($,null,z(e,o=>(_(),k(A,{onChat:u,onDelete:f,onVisit:i,watch:o},null,8,["watch"]))),256)),d(S,{userid:g(r).userid,ref_key:"chat_dialog_ref",ref:s},null,8,["userid"])],4))}});const j=W(E,[["__scopeId","data-v-ffa5a18d"]]);export{j as default};
